# https://wiki.hyprland.org/Configuring/Configuring-Hyprland/

# source = ~/.config/hypr/myColors.conf
# source = ~/.config/hypr/scripts/colors-hyprland.conf
 source = ~/.config/hypr/colors/colors.conf


################
### MONITORS ###
################

# See https://wiki.hyprland.org/Configuring/Monitors/
#monitor=,3840x2160@30,auto,3 ##For my TV
#monitor=DP-1,1920x1080@144,auto,auto ##My Monitor
#monitor=HEADLESS-2,2400x1080@60,360x1080,auto ##My phone i used through a VNC server
source = ~/.config/hypr/monitors.conf


###################
### MY PROGRAMS ###
###################

# See https://wiki.hyprland.org/Configuring/Keywords/

# Set programs that you use
$terminal = kitty
$browser = librewolf
$fileManager = nautilus


#################
### AUTOSTART ###
#################

# Autostart necessary processes (like notifications daemons, status bars, etc.)
# Or execute your favorite apps at launch like this:

# exec-once = $terminal
# exec-once = nm-applet &
 exec-once = waybar & swww-daemon & qs
 exec-once = hyprpm reload
 exec-once = dunst -config ~/.config/dunst/dunstrc.conf
 exec-once = discover-overlay
 exec-once = hyprctl setcursor Bibata-Modern-Classic 24		#set this to your cursor 
 exec-once = clipse -listen
 exec-once = kdeconnect-indicator
 exec-once = kdeconnectd
 exec-once = ollama serve
 exec-once = hyprswitch init --show-title --size-factor 5.5 --workspaces-per-row 5 &
 exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
 exec-once= dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec-once = swayosd-server
# exec-once = ~/.config/hypr/scripts/xdg-desktop-portal-hyprland.sh
# exec-once = hyprctl output create headless
# exec-once = wayvncctl output-set HEADLESS-2
# exec-once = wayvnc 192.168.1.104 5900


#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hyprland.org/Configuring/Environment-variables/

env = XCURSOR_SIZE,24
env = HYPRCURSOR_THEME,Bibata-Modern-Classic  # Replace Bibata-Modern-Ice with the name of the theme you downloaded
env = XCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,24                  # Replace 24 with your desired size
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_STYLE_OVERRIDE=kvantum
#env = HYPRSHOT_DIR= ~/Pictures/Screenshots

#####################
### LOOK AND FEEL ###
#####################

# Refer to https://wiki.hyprland.org/Configuring/Variables/

# https://wiki.hyprland.org/Configuring/Variables/#general



general {
    gaps_in = 6
    gaps_out = 10

    border_size = 2

    # https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
    col.active_border = $source_color
    col.inactive_border = $on_secondary

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = false

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false

    layout = dwindle
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 15

    # Change transparency of focused and unfocused windows
    active_opacity = 1
    inactive_opacity = 0.8
    blurls = waybar 

    #drop_shadow = true
    #shadow_range = 4
    #shadow_render_power = 3
    #col.shadow = rgba(1a1a1aee)

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true
        size = 3
        passes = 4

        vibrancy = 0.9
    }
}

group{
	#group = true
	#group_rounding = 10
	#group_border_color = #333333  # Dark gray
	#group_border_width = 2
	#group_opacity = 0.8
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true

    # Default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

    bezier = quirkyBounce, 0.05, 0.9, 0.1, 1.05
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1
    
    animation = windows, 1, 4, quirkyBounce
    animation = windowsOut, 1, 8, quirkyBounce
    animation = border, 1, 1, quick
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 4, easeOutQuint
}

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

# See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
master {
    new_status = master
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
    focus_on_activate = true
    middle_click_paste = false
    enable_anr_dialog = false
}


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = us, bg
    kb_variant = ,phonetic
    kb_model =
    kb_options = grp:alt_shift_toggle
    kb_rules =

    follow_mouse = 1
    natural_scroll = false
    repeat_rate = 24
    force_no_accel = true
    repeat_delay = 600
    sensitivity = 0.0001 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = true
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#gestures


# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more



# ----------------------------------------------------- 
# Key bindings
# ----------------------------------------------------- 

# SUPER KEY
$mainMod = SUPER

# Applications
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, B, exec, $browser
bind = $mainMod, E, exec, $fileManager
bind = $mainMod SHIFT, D, exec, pwvucontrol
bind = $mainMod, SPACE, exec, rofi -show drun #~/.config/rofi/launchers/type-1/launcher.sh
bind = $mainMod, D, exec, rofi -show filebrowser # ~/.config/rofi/launchers/type-1/filebrowser.sh
bind = $mainMod, S, exec, flatpak run com.notesnook.Notesnook #XDG_CURRENT_DESKTOP=GNOME gnome-control-center
bind = $mainMod, V, exec, kitty --class clipse -e clipse
bind = $mainMod, M, exec, g4music
bindd = Super, N, Toggle right sidebar, global, quickshell:sidebarRightToggle # Toggle right sidebar
bindd = Ctrl+Alt, Delete, Toggle session menu, global, quickshell:sessionToggle # Toggle session menu
bind = $mainMod, W, exec, pkill -SIGUSR1 waybar 
bind = $mainMod ALT, P, exec, systemctl --user restart pipewire 
bind = $mainMod, R, exec, rofi -show emoji
bind = $mainMod, A, exec, flatpak run com.jeffser.Alpaca

# Windows
bind = $mainMod, Q, killactive # Kill active window
bind = $mainMod, F, fullscreen # Set active window to fullscreen
bind = $mainMod, T, togglefloating # Toggle active windows into floating mode
bind = $mainMod, J, togglesplit # Toggle split
bind = $mainMod, left, movefocus, l # Move focus left
bind = $mainMod, right, movefocus, r # Move focus right
bind = $mainMod, up, movefocus, u # Move focus up
bind = $mainMod, down, movefocus, d # Move focus down
bindm = $mainMod, mouse:272, movewindow # Move window with the mouse
bindm = $mainMod, mouse:273, resizewindow # Resize window with the mouse
bind = $mainMod ALT, right, resizeactive, 100 0 # Increase window width with keyboard
bind = $mainMod ALT, left, resizeactive, -100 0 # Reduce window width with keyboard
bind = $mainMod ALT, down, resizeactive, 0 100 # Increase window height with keyboard
bind = $mainMod ALT, up, resizeactive, 0 -100 # Reduce window height with keyboard
bind = $mainMod, H, togglegroup # Toggle window group
bind = $mainMod, K, swapsplit # Swapsplit

# Actions
bind = , Print, exec, hyprshot --freeze -m region
bind = CTRL SHIFT, Escape, exec, kitty --hold sh -c htop
bind = Super SHIFT, S, exec, HYPRSHOT_DIR=~/Pictures/Screenshots hyprshot --freeze -m region
bind = $mainMod, L, exec, hyprlock
bind = $mainMod, P, exec, hyprpicker
bind = $mainMod CTRL, Q, exec, ~/.config/rofi/powermenu/type-2/powermenu.sh
bind = $mainMod SHIFT, B, exec, ~/.config/hypr/scripts/restart_waybar.sh
bind = $mainMod SHIFT, C, exec, ~/.config/hypr/scripts/restart_dunst.sh
bind = $mainMod, C, exec, abeep -f 1000Hz
bind = $mainMod, G, exec, ~/.config/hypr/scripts/gamemode.sh

# Workspaces
bind = $mainMod, 1, workspace, 1 # Open workspace 1
bind = $mainMod, 2, workspace, 2 # Open workspace 2
bind = $mainMod, 3, workspace, 3 # Open workspace 3
bind = $mainMod, 4, workspace, 4 # Open workspace 4
bind = $mainMod, 5, workspace, 5 # Open workspace 5
bind = $mainMod, 6, workspace, 6 # Open workspace 6
bind = $mainMod, 7, workspace, 7 # Open workspace 7
bind = $mainMod, 8, workspace, 8 # Open workspace 8
bind = $mainMod, 9, workspace, 9 # Open workspace 9
bind = $mainMod, 0, workspace, 10 # Open workspace 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1 # Move active window to workspace 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2 # Move active window to workspace 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3 # Move active window to workspace 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4 # Move active window to workspace 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5 # Move active window to workspace 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6 # Move active window to workspace 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7 # Move active window to workspace 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8 # Move active window to workspace 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9 # Move active window to workspace 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10 # Move active window to workspace 10

bind = $mainMod, mouse_down, workspace, e+1 # Open next workspace
bind = $mainMod, mouse_up, workspace, e-1 # Open previous workspace
bind = $mainMod CTRL, down, workspace, empty # Open the next empty workspace


# Passthrough SUPER KEY to Virtual Machine
# bind = $mainMod, P, submap, passthru # Passthrough SUPER key to virtual machine
# submap = passthru
# bind = SUPER, Escape, submap, reset # Get SUPER key back from virtual machine
# submap = reset

# Fn keys
bind = , XF86MonBrightnessUp, exec, brightnessctl -q s +10% # Increase brightness by 10%
bind = , XF86MonBrightnessDown, exec, brightnessctl -q s 10%- # Reduce brightness by 10%
bind = , XF86MonBrightnessUp, exec, ddcutil -d 1 setvcp 12 + 10
bind = , XF86MonBrightnessDown, exec, ddcutil -d 1 setvcp 12 - 10
bind = , XF86MonBrightnessUp, exec, ddcutil -d 1 setvcp 10 + 10
bind = , XF86MonBrightnessDown, exec, ddcutil -d 1 setvcp 10 - 10
bind = , XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bind = , XF86MonBrightnessDown, exec, swayosd-client --brightness lower

bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% # Increase volume by 5%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5% # Reduce volume by 5%
bind = , XF86AudioRaiseVolume, exec,  swayosd-client --output-volume raise --max-volume 100
bind = , XF86AudioLowerVolume, exec,  swayosd-client --output-volume lower --max-volume 100
#bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle # Toggle mute
bind = , XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bind = , XF86Mail, exec, thunderbird
bind = , Pause, exec, playerctl play-pause # Audio play pause
bind = , mouse:277, exec, playerctl play-pause # Audio play pause
bind = , XF86AudioPause, exec, playerctl pause # Audio pause
bind = , XF86AudioNext, exec, playerctl next # Audio next
bind = , XF86AudioPause, exec, playerctl pause # Audio pause
bind = $mainMod SHIFT, N, exec, playerctl next # Audio next
bind = $mainMod SHIFT, P, exec, playerctl previous # Audio previous
bind = , XF86AudioMicMute, exec, wpctl set-source-mute @DEFAULT_SOURCE@ toggle # Toggle microphone
bind = $mainMod SHIFT, M, exec, wpctl set-mute @DEFAULT_SOURCE@ toggle # Toggle microphone
bind = , XF86Calculator, exec, gnome-calculator
bind = , XF86Lock, exec, hyprlock # Open screenlock
bind = , XF86Tools, exec, g4music
bind = , Caps_Lock, exec, swayosd-client --caps-lock

#got myself a logitech navigator keyboard (the exact same one in CSGO) and wanted to make the extra buttons do something, so i set them all to discord.

#bind = , XF86Shop, exec, discord
#bind = , XF86Search, exec, discord
#bind = , XF86HomePage, exec, discord
#bind = , XF86Finance, exec, discord
#bind = , XF86Launch1, exec, discord
#bind = , XF86Launch2, exec, discord


bind = , code:238, exec, brightnessctl -d smc::kbd_backlight s +10
bind = , code:237, exec, brightnessctl -d smc::kbd_backlight s 10- 

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
workspace = 9, monitor:HEADLESS-2

# Example windowrule v1
# windowrule = float, ^(kitty)$

# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$
windowrulev2 = float,class:^(org.gnome.Calculator)$,title:^(Calculator)$
windowrulev2 = float,class:^(org.pulseaudio.pavucontrol)$,title:^(Volume Control)$
windowrulev2 = float,class:^(com.saivert.pwvucontrol)$,title:^(Pipewire Volume Control)$
	windowrulev2 = size 896 390,class:^(com.saivert.pwvucontrol)$,title:^(Pipewire Volume Control)$
windowrulev2 = float,title:^(Picture-in-Picture)$
	windowrulev2 = size 854 480,title:^(Picture-in-Picture)$
	windowrulev2 = move 18 580,title:^(Picture-in-Picture)$
	windowrulev2 = pin,title:^(Picture-in-Picture)$
	windowrulev2 = opaque,class:^(librewolf)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(io.bassi.Amberol)$,title:^(Amberol)$
windowrulev2 = float,class:^(com.github.neithern.g4music)$
	windowrule = size 342 768, class:(com.github.neithern.g4music)
	windowrule = move 8 135, class:(com.github.neithern.g4music)
windowrulev2 = float,class:^(org.gnome.gedit)$
windowrule = float, class:(clipse)
	windowrule = size 610 774, class:(clipse)
	windowrule = move 12 52, class:(clipse)
	windowrule = stayfocused, class:(clipse)
windowrule = float, class:(kew)
	windowrule = size 670 652, class:(kew)
windowrulev2 = float,class:^(org.gnome.clocks)$
	windowrulev2 = size 390 766,class:^(org.gnome.clocks)
windowrulev2 = float,class:^(org.kde.kdeconnect.daemon)$,title:^(KDE Connect Daemon)$
	windowrulev2 = size 1920 1080,class:^(org.kde.kdeconnect.daemon)$,title:^(KDE Connect Daemon)$
	windowrulev2 = float, title:^(.*Network Manager.*)$
	windowrulev2 = float, title:^(.*Waypaper.*)$
	windowrulev2 = plugin:chromakey,fullscreen:0
#chromakey_background = 7,8,17

# Ignore maximize requests from apps. You'll probably like this.
windowrulev2 = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0


plugin:dynamic-cursors {

    # enables the plugin
    enabled = true

    # sets the cursor behaviour, supports these values:
    # tilt    - tilt the cursor based on x-velocity
    # rotate  - rotate the cursor based on movement direction
    # stretch - stretch the cursor shape based on direction and velocity
    # none    - do not change the cursors behaviour
    mode = stretch

    # minimum angle difference in degrees after which the shape is changed
    # smaller values are smoother, but more expensive for hw cursors
    threshold = 2

    # override the mode behaviour per shape
    # this is a keyword and can be repeated many times
    # by default, there are no rules added
    # see the dedicated `shape rules` section below!
    #shaperule = <shape-name>, <mode> (optional), <property>: <value>, ...
    #shaperule = <shape-name>, <mode> (optional), <property>: <value>, ...
    

    # for mode = rotate
    rotate {

        # length in px of the simulated stick used to rotate the cursor
        # most realistic if this is your actual cursor size
        length = 20

        # clockwise offset applied to the angle in degrees
        # this will apply to ALL shapes
        offset = 0.0
    }

    # for mode = tilt
    tilt {

        # controls how powerful the tilt is, the lower, the more power
        # this value controls at which speed (px/s) the full tilt is reached
        # the full tilt being 60Â° in both directions
        limit = 5000

        # relationship between speed and tilt, supports these values:
        # linear             - a linear function is used
        # quadratic          - a quadratic function is used (most realistic to actual air drag)
        # negative_quadratic - negative version of the quadratic one, feels more aggressive
        # see `activation` in `src/mode/utils.cpp` for how exactly the calculation is done
        function = negative_quadratic

        # time window (ms) over which the speed is calculated
        # higher values will make slow motions smoother but more delayed
        window = 100
    }

    # for mode = stretch
    stretch {

        # controls how much the cursor is stretched
        # this value controls at which speed (px/s) the full stretch is reached
        # the full stretch being twice the original length
        limit = 15000

        # relationship between speed and stretch amount, supports these values:
        # linear             - a linear function is used
        # quadratic          - a quadratic function is used
        # negative_quadratic - negative version of the quadratic one, feels more aggressive
        # see `activation` in `src/mode/utils.cpp` for how exactly the calculation is done
        function = quadratic

        # time window (ms) over which the speed is calculated
        # higher values will make slow motions smoother but more delayed
        window = 100
    }

    # configure shake to find
    # magnifies the cursor if its is being shaken
    shake {

        # enables shake to find
        enabled = false

        # use nearest-neighbour (pixelated) scaling when shaking
        # may look weird when effects are enabled
        nearest = true

        # controls how soon a shake is detected
        # lower values mean sooner
        threshold = 6.0

        # magnification level immediately after shake start
        base = 4.0
        # magnification increase per second when continuing to shake
        speed = 4.0
        # how much the speed is influenced by the current shake intensitiy
        influence = 0.0

        # maximal magnification the cursor can reach
        # values below 1 disable the limit (e.g. 0)
        limit = 0.0

        # time in millseconds the cursor will stay magnified after a shake has ended
        timeout = 2000

        # show cursor behaviour `tilt`, `rotate`, etc. while shaking
        effects = false

        # enable ipc events for shake
        # see the `ipc` section below
        ipc = false
    }

    # use hyprcursor to get a higher resolution texture when the cursor is magnified
    # see the `hyprcursor` section below
    hyprcursor {

        # use nearest-neighbour (pixelated) scaling when magnifing beyond texture size
        # this will also have effect without hyprcursor support being enabled
        # 0 / false - never use pixelated scaling
        # 1 / true  - use pixelated when no highres image
        # 2         - always use pixleated scaling
        nearest = true

        # enable dedicated hyprcursor support
        enabled = true

        # resolution in pixels to load the magnified shapes at
        # be warned that loading a very high-resolution image will take a long time and might impact memory consumption
        # -1 means we use [normal cursor size] * [shake:base option]
        resolution = -1

        # shape to use when clientside cursors are being magnified
        # see the shape-name property of shape rules for possible names
        # specifying clientside will use the actual shape, but will be pixelated
        fallback = clientside
    }
}
